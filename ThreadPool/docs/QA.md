# QA
Some of the answers are generated by AI, so there may exist some mistakes.

## Fuetx.h
### `futex` 和 `mutex` 有什么区别？
`futex` 和 `mutex` 都是同步原语，但它们有一些重要的区别。以下是两者的主要差异：

1. **定义和范围**：
    - **Futex (Fast Userspace Mutex)**：Futex 是 Linux 提供的一个轻量级同步原语，其设计的初衷是大部分时间在用户空间执行操作，只在必要时切换到内核空间。其设计是为了解决当多个线程竞争同一资源时发生的上下文切换开销。
    - **Mutex (Mutual Exclusion)**：互斥锁是许多操作系统和编程语言库中提供的一种同步原语。当一个线程持有一个互斥锁时，其他线程必须等待直到该锁被释放。

2. **操作方式**：
    - **Futex**：Futex 通常被设计为在用户空间操作，只在阻塞时转到内核空间。这意味着，在没有竞争的情况下，futex 的操作可以非常快。
    - **Mutex**：依赖于其实现，但通常，每次互斥锁的加锁和解锁都可能涉及到内核操作，尤其是在有竞争的情况下。

3. **使用场景**：
    - **Futex**：Futex 通常被用作构建其他高级同步原语的基石，例如条件变量、读写锁等。
    - **Mutex**：互斥锁广泛用于防止多线程同时访问共享资源。

4. **可移植性**：
    - **Futex**：是 Linux 特有的同步原语。
    - **Mutex**：互斥锁在许多操作系统和编程语言中都有实现，因此通常更具有可移植性。

5. **复杂性**：
    - **Futex**：因为 futex 主要用作构建块，所以直接使用 futex 可能比使用互斥锁更加复杂。
    - **Mutex**：互斥锁的 API 通常很简单，大多数程序员都熟悉它。

总结：虽然 futex 和 mutex 都用于线程同步，但 futex 通常更低级、更快速（尤其在无竞争的情况下），而 mutex 更易于使用且更具可移植性。

